/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "main": {
      "type": "main-page",
      "disabled": true,
      "settings": {
        "padding_top": 28,
        "padding_bottom": 28
      }
    },
    "custom_liquid_yxKzpk": {
      "type": "custom-liquid",
      "name": "t:sections.custom-liquid.presets.name",
      "settings": {
        "custom_liquid": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title>Caffeine & Legends ‚Äì Multi-Step Selector</title>\n  <style>\n    :root{\n      --brand:#e33b3b; --ink:#0d2331; --muted:#607d8b;\n      --bg:#0c2b34; --card:#ffffff; --accent:#7ee081;\n      --radius:18px; --shadow:0 10px 24px rgba(0,0,0,.08);\n    }\n    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}\n    .wrap{max-width:1100px;margin:32px auto;padding:20px}\n    h1{color:var(--ink);text-align:center;margin:8px 0 18px;font-weight:800;letter-spacing:.2px}\n\n    /* Cards & grids */\n    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}\n    .grid{display:grid;gap:16px}\n    @media (min-width:880px){\n      .grid.cols-2{grid-template-columns:1fr 1fr}\n      .grid.cols-4{grid-template-columns:repeat(4,1fr)}\n    }\n\n    /* Tier options (Step 1) */\n    .option{border:2px solid #e7eef1;border-radius:14px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:all .18s ease;position:relative;background:#fff}\n    .option:hover{border-color:#c9dade;box-shadow:0 6px 18px rgba(3,34,41,.08)}\n    .option.selected{border-color:var(--brand);outline:3px solid var(--brand);outline-offset:3px;box-shadow:0 10px 24px rgba(227,59,59,.12)}\n    .option h3{margin:0 0 6px 0;font-size:20px}\n    .price{color:var(--muted);font-weight:600;display:flex;flex-direction:column;gap:2px}\n    .price .label{font-size:12px;color:var(--muted)}\n    .price .amount{font-size:24px;color:var(--ink);font-weight:800}\n    .price .suffix{font-size:14px;color:var(--muted);font-weight:600}\n    .option.promo{border-color:var(--accent);box-shadow:0 12px 28px rgba(126,224,129,.22)}\n    .subline{font-size:13px;color:#5e6b74;margin-top:2px}\n\n    /* FREE COFFEE SCOOP badge (tier cards + term cards share style) */\n    .badge{\n      position:absolute;top:-12px;right:-12px;background:var(--accent);\n      color:#083b1a;font-weight:800;font-size:11px;padding:6px 10px;border-radius:999px;\n      box-shadow:0 3px 6px rgba(0,0,0,.15);letter-spacing:.5px;white-space:nowrap\n    }\n\n    /* Tier toggle (Step 2 & 3) */\n    .tier-toggle{display:flex;gap:8px;align-items:center;margin-bottom:12px;flex-wrap:wrap}\n    .tier-toggle .label{font-weight:800;color:#2a3c46;margin-right:4px}\n    .seg{display:flex;background:#f4f7f9;border:2px solid #e7eef1;border-radius:12px;overflow:hidden}\n    .seg button{\n      background:transparent;border:none;padding:10px 14px;cursor:pointer;font-weight:800;color:#46606b\n    }\n    .seg button.active{background:#fff;color:var(--brand);border:2px solid var(--brand);border-radius:10px;margin:4px}\n\n    /* Terms grid */\n    .terms{display:grid;gap:16px}\n    @media (min-width:640px){.terms{grid-template-columns:repeat(2,1fr)}}\n    @media (min-width:1024px){.terms{grid-template-columns:repeat(4,1fr)}}\n    .term{\n      border:2px solid #e7eef1;border-radius:14px;background:#fff;box-shadow:var(--shadow);\n      padding:16px;display:flex;flex-direction:column;gap:6px;cursor:pointer;\n      transition:border-color .18s, box-shadow .18s;position:relative\n    }\n    .term:hover{border-color:#c9dade;box-shadow:0 6px 18px rgba(3,34,41,.08)}\n    .term.selected{border-color:var(--brand);box-shadow:0 10px 24px rgba(227,59,59,.12)}\n    .t-title{font-weight:800;font-size:18px}\n    .t-price{font-size:22px;font-weight:900;color:var(--ink)}\n    .t-note{font-size:12px;color:var(--muted)}\n\n    /* Drink step ‚Äì full width 1-drink */\n    #step-2 .controls{display:flex;flex-direction:column;align-items:stretch;gap:8px}\n    #step-2 .select{width:100%;min-width:0;padding:14px 16px;font-size:16px}\n\n    /* VIP */\n    .vip{display:flex;align-items:start;gap:12px;border-top:1px dashed #e7eef1;margin-top:14px;padding-top:14px;position:relative}\n    .vip small{color:#5e6b74}\n    .vip .vip-info{background:transparent;border:none;color:#104854;text-decoration:underline;cursor:pointer;font-size:12px;padding:0;margin-left:6px}\n    .vip-popover{position:absolute;right:0;bottom:calc(100% + 10px);z-index:30;background:#ffffff;border:1px solid #e7eef1;border-radius:12px;box-shadow:0 12px 28px rgba(0,0,0,.12);padding:14px;max-width:520px;width:min(92vw,520px);max-height:min(70vh,420px);overflow:auto;display:none}\n    .vip-popover.open{display:block}\n\n    .cta{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:12px}\n    .btn{background:var(--brand);color:#fff;border:none;border-radius:999px;padding:14px 22px;font-weight:800;letter-spacing:.3px;cursor:pointer}\n    .btn.secondary{background:#ffffff;color:var(--brand);border:2px solid var(--brand)}\n    .hint{color:#dbe9ec;font-size:13px;text-align:center;margin-top:10px}\n    .hidden{display:none}\n  </style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <h1>Choose Your Subscription</h1>\n\n    <!-- STEP 1: Tier -->\n    <section class=\"card\" id=\"step-1\">\n      <div class=\"grid cols-2\">\n        <div class=\"option\" data-tier=\"one\">\n          <h3>Standard</h3>\n          <div class=\"price\">\n            <span class=\"label\">Starting at</span>\n            <span class=\"amount\">$38.99<span class=\"suffix\"> /box + s/h</span></span>\n          </div>\n          <small>1 full-size drink each month</small>\n          <div class=\"subline\">Great for solo readers.</div>\n        </div>\n\n        <div class=\"option promo\" data-tier=\"two\">\n          <span class=\"badge\">FREE COFFEE SCOOP</span>\n          <h3>Two Drinks Each Month</h3>\n          <div class=\"price\">\n            <span class=\"label\">Starting at</span>\n            <!-- changed to $50.99 to reflect best (12-mo) per-box -->\n            <span class=\"amount\">$50.99<span class=\"suffix\"> /box + s/h</span></span>\n          </div>\n          <small>2 full-size drinks each month</small>\n          <div class=\"subline\">Best value for duos or caffeine fiends.</div>\n        </div>\n      </div>\n      <div class=\"cta\">\n        <button class=\"btn\" id=\"to-step-2\" disabled>Continue ‚Üí</button>\n        <span class=\"hint\">Select a tier to continue</span>\n      </div>\n    </section>\n\n    <!-- STEP 2: Drink -->\n    <section class=\"card hidden\" id=\"step-2\">\n      <!-- Tier toggle -->\n      <div class=\"tier-toggle\" id=\"toggle-2\">\n        <span class=\"label\">Plan:</span>\n        <div class=\"seg\">\n          <button type=\"button\" data-tier=\"one\" class=\"active\">1 Drink</button>\n          <button type=\"button\" data-tier=\"two\">2 Drinks</button>\n        </div>\n      </div>\n\n      <div id=\"drink-form\" class=\"grid\"></div>\n      <div class=\"cta\">\n        <button class=\"btn secondary\" id=\"back-1\">‚Üê Back</button>\n        <button class=\"btn\" id=\"to-step-3\" disabled>Continue ‚Üí</button>\n      </div>\n    </section>\n\n    <!-- STEP 3: Term + VIP -->\n    <section class=\"card hidden\" id=\"step-3\">\n      <!-- Tier toggle -->\n      <div class=\"tier-toggle\" id=\"toggle-3\">\n        <span class=\"label\">Plan:</span>\n        <div class=\"seg\">\n          <button type=\"button\" data-tier=\"one\" class=\"active\">1 Drink</button>\n          <button type=\"button\" data-tier=\"two\">2 Drinks</button>\n        </div>\n      </div>\n\n      <div class=\"terms\" id=\"terms\"></div>\n\n      <label class=\"vip\">\n        <input type=\"checkbox\" id=\"vip-toggle\" />\n        <div>\n          <strong>üîÆ Unlock Legendary Access ‚Äî join the C&L VIP program</strong>\n          <small>$10/month ‚Äî billed monthly.\n            <button type=\"button\" class=\"vip-info\" id=\"vip-info-btn\">What‚Äôs included in Legendary Access?</button>\n          </small>\n          <div class=\"vip-popover\" id=\"vip-popover\" role=\"dialog\" aria-modal=\"false\" aria-labelledby=\"vip-pop-title\">\n            <h4 id=\"vip-pop-title\">üîÆ LEGENDARY ACCESS üîÆ</h4>\n            <p>Join an exclusive community where your voice shapes the magic.</p>\n            <ul>\n              <li>üó≥Ô∏è <strong>Your Voice Matters</strong> ‚Äî vote on upcoming books, drinks, and bonus items.</li>\n              <li>üíé <strong>$10 Monthly Credits</strong> ‚Äî for our members-only secret store (expire in 30 days).</li>\n              <li>‚ú® <strong>VIP Experiences</strong> ‚Äî monthly live Q&As with authors & creators.</li>\n              <li>üìú <strong>Insider Access</strong> ‚Äî members-only newsletter.</li>\n              <li>üéÅ <strong>Golden Ticket Giveaways</strong> ‚Äî monthly surprise for one member.</li>\n              <li>üí∞ <strong>Referral Rewards</strong> ‚Äî give $15, get $15.</li>\n            </ul>\n            <button type=\"button\" class=\"btn secondary vip-close\" id=\"vip-pop-close\">Close</button>\n          </div>\n        </div>\n      </label>\n\n      <div class=\"cta\">\n        <button class=\"btn secondary\" id=\"back-2\">‚Üê Back</button>\n        <button class=\"btn\" id=\"add-to-cart\">Add to Cart</button>\n        <span class=\"hint\" id=\"cta-hint\">Adds your plan (and VIP if selected) to the cart.</span>\n      </div>\n    </section>\n  </div>\n\n  <script>\n    // Initialize even if injected after DOM ready (Shopify sections)\n    (function onReady(fn){ if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',fn);} else {fn();} })(function init(){\n      /* ===== CONFIG (replace TODOs with real IDs) ===== */\n      var CONFIG = {\n        oneDrink: {\n          monthly: { variantId: 32035742220332, sellingPlanId: 3626041567 },\n          three:   { variantId: 0,              sellingPlanId: 0 }, // TODO\n          six:     { variantId: 37261724254369, sellingPlanId: 3625943263 },\n          twelve:  { variantId: 0,              sellingPlanId: 0 }  // TODO\n        },\n        twoDrinks: {\n          monthly: { variantId: 0, sellingPlanId: 0 }, // TODO\n          three:   { variantId: 0, sellingPlanId: 0 }, // TODO\n          six:     { variantId: 0, sellingPlanId: 0 }, // TODO\n          twelve:  { variantId: 0, sellingPlanId: 0 }  // TODO\n        },\n        vip: { variantId: 46994096718047, sellingPlanId: 4291854559 }\n      };\n\n      function openCartDrawer(){ document.dispatchEvent(new CustomEvent('cart:open')); }\n\n      // ===== STATE =====\n      var state = { tier:null, drink1:null, drink2:null, term:'monthly' };\n\n      // ===== Utilities =====\n      function setActiveStep(n){\n        [1,2,3].forEach(function(i){\n          document.getElementById('step-'+i).classList.toggle('hidden', i!==n);\n        });\n      }\n      function syncToggleUI(){\n        ['toggle-2','toggle-3'].forEach(function(id){\n          var wrap = document.getElementById(id);\n          if(!wrap) return;\n          var buttons = wrap.querySelectorAll('button[data-tier]');\n          buttons.forEach(function(b){\n            b.classList.toggle('active', b.getAttribute('data-tier') === state.tier);\n          });\n        });\n        document.querySelectorAll('#step-1 .option').forEach(function(o){\n          o.classList.toggle('selected', o.getAttribute('data-tier') === state.tier);\n        });\n      }\n      function attachToggleHandlers(){\n        ['toggle-2','toggle-3'].forEach(function(id){\n          var wrap = document.getElementById(id);\n          if(!wrap) return;\n          wrap.addEventListener('click', function(e){\n            var btn = e.target.closest('button[data-tier]');\n            if(!btn) return;\n            var newTier = btn.getAttribute('data-tier'); // 'one' | 'two'\n            if(newTier === state.tier) return;\n\n            // apply the new tier\n            state.tier = newTier;\n            syncToggleUI();\n\n            // If user is toggling at the term page without having drink selections for that tier,\n            // send them to the drink step to select.\n            var needsSelection = (state.tier === 'one' && !state.drink1) ||\n                                 (state.tier === 'two' && (!state.drink1 || !state.drink2));\n\n            if(id === 'toggle-3' && needsSelection){\n              // go back to drink step to capture choices\n              renderDrinkStep();\n              setActiveStep(2);\n              return;\n            }\n\n            // Otherwise re-render the current step\n            if(id === 'toggle-2'){ renderDrinkStep(); }\n            if(id === 'toggle-3'){ renderTerms(); }\n          });\n        });\n      }\n\n      // ===== STEP 1 (Tier) =====\n      var step1 = document.getElementById('step-1');\n      var btnToStep2 = document.getElementById('to-step-2');\n      step1.addEventListener('click', function(e){\n        var opt = e.target.closest('.option');\n        if (!opt || !step1.contains(opt)) return;\n        step1.querySelectorAll('.option').forEach(function(o){ o.classList.remove('selected'); });\n        opt.classList.add('selected');\n        state.tier = opt.getAttribute('data-tier');    // 'one' or 'two'\n        state.drink1 = null; state.drink2 = null;\n        btnToStep2.disabled = false;\n        syncToggleUI();\n      });\n      btnToStep2.addEventListener('click', function(){\n        syncToggleUI();\n        renderDrinkStep();\n        setActiveStep(2);\n      });\n\n      // ===== STEP 2 (Drink selectors) =====\n      var DRINK_OPTIONS_ALL = ['Coffee','Tea','Drinking Chocolate','Surprise Me'];\n      var DRINK_OPTIONS_NO_SURPRISE = ['Coffee','Tea','Drinking Chocolate'];\n\n      function createDrinkSelect(id,label,options){\n        var wrap = document.createElement('div');\n        wrap.className = 'controls';\n        var lab = document.createElement('label'); lab.htmlFor = id; lab.innerHTML = '<strong>'+label+'</strong>';\n        var sel = document.createElement('select'); sel.id = id; sel.className = 'select';\n        var ph = document.createElement('option'); ph.value = ''; ph.textContent = 'Select a drink‚Ä¶'; ph.disabled = true; ph.selected = true; sel.appendChild(ph);\n        options.forEach(function(v){ var o=document.createElement('option'); o.value=v; o.textContent=v; sel.appendChild(o); });\n        wrap.appendChild(lab); wrap.appendChild(sel);\n        return {wrap:wrap, sel:sel};\n      }\n\n      function renderDrinkStep(){\n        var form = document.getElementById('drink-form');\n        form.innerHTML = '';\n        form.classList.toggle('cols-2', state.tier === 'two'); // two columns only for 2 drinks\n        var fields = [];\n        if(state.tier === 'two'){\n          var a = createDrinkSelect('drink-one','Drink One', DRINK_OPTIONS_NO_SURPRISE);\n          var b = createDrinkSelect('drink-two','Drink Two', DRINK_OPTIONS_NO_SURPRISE);\n          form.appendChild(a.wrap); form.appendChild(b.wrap);\n          fields.push(a.sel,b.sel);\n        } else {\n          var s = createDrinkSelect('drink-single','Drink', DRINK_OPTIONS_ALL);\n          form.appendChild(s.wrap);\n          fields.push(s.sel);\n        }\n        var btn = document.getElementById('to-step-3');\n        function validate(){ btn.disabled = !fields.every(function(s){ return s.value && s.value.length>0; }); }\n        fields.forEach(function(s){ s.addEventListener('change', validate); });\n        validate();\n      }\n\n      document.getElementById('back-1').addEventListener('click', function(){ setActiveStep(1); });\n      document.getElementById('to-step-3').addEventListener('click', function(){\n        if(state.tier === 'two'){\n          state.drink1 = (document.getElementById('drink-one')||{}).value || null;\n          state.drink2 = (document.getElementById('drink-two')||{}).value || null;\n        } else {\n          state.drink1 = (document.getElementById('drink-single')||{}).value || null;\n        }\n        syncToggleUI();\n        renderTerms();\n        setActiveStep(3);\n      });\n\n      // ===== STEP 3 (Terms + VIP) =====\n      function formatMoney(n){ return '$' + Number(n).toFixed(2); }\n      function monthsLabel(m){ return m === 1 ? 'monthly' : ('every ' + m + ' months'); }\n\n      function renderTerms(){\n        var container = document.getElementById('terms');\n        container.innerHTML = '';\n\n        // Single-drink pricing (per box given)\n        var one = [\n          {key:'monthly', title:'Monthly Plan',     perBox: 42.99, months: 1},\n          {key:'three',   title:'3-Month Prepaid',  perBox: 41.99, months: 3},\n          {key:'six',     title:'6-Month Prepaid',  perBox: 39.99, months: 6},\n          {key:'twelve',  title:'12-Month Prepaid', perBox: 38.99, months: 12}\n        ];\n        // Two-drink totals provided; per box is total / months\n        var two = [\n          {key:'monthly', title:'Monthly Plan',     total:  54.99, months: 1},\n          {key:'three',   title:'3-Month Prepaid',  total: 161.97, months: 3},\n          {key:'six',     title:'6-Month Prepaid',  total: 311.94, months: 6},\n          {key:'twelve',  title:'12-Month Prepaid', total: 611.88, months: 12}\n        ];\n\n        var rows = (state.tier === 'two')\n          ? two.map(function(r){ return { key:r.key, title:r.title, perBox:(r.total/r.months), total:r.total, months:r.months }; })\n          : one.map(function(r){ return { key:r.key, title:r.title, perBox:r.perBox, total:(r.perBox*r.months), months:r.months }; });\n\n        rows.forEach(function(row){\n          var combinedTotal = row.months > 1\n            ? 'Total ' + formatMoney(row.total) + ' billed ' + monthsLabel(row.months) + ' + Shipping'\n            : 'Total ' + formatMoney(row.total) + ' billed ' + monthsLabel(row.months);\n\n          var el = document.createElement('div');\n          el.className = 'term';\n          el.setAttribute('data-term', row.key);\n\n          // Show \"Free Scoop\" ribbons on ALL terms for 2-drink plan (incl. monthly); none for 1-drink plan\n          if(state.tier === 'two'){\n            var badge = document.createElement('span');\n            badge.className = 'badge';\n            badge.textContent = 'Free Scoop'; // cleaner label per request\n            el.appendChild(badge);\n          }\n\n          el.innerHTML +=\n            '<div class=\"t-title\">'+row.title+'</div>'+\n            '<div class=\"t-price\">'+formatMoney(row.perBox)+'/box</div>'+\n            '<div class=\"t-note\">'+combinedTotal+'</div>'+\n            (row.months === 1 ? '<div class=\"t-note\">+ Shipping</div>' : '');\n\n          if(row.key === state.term) el.classList.add('selected');\n          el.addEventListener('click', function(){\n            container.querySelectorAll('.term').forEach(function(t){ t.classList.remove('selected'); });\n            el.classList.add('selected'); state.term = row.key;\n          });\n          container.appendChild(el);\n        });\n      }\n\n      // VIP popover\n      var vipInfoBtn = document.getElementById('vip-info-btn');\n      var vipPopover = document.getElementById('vip-popover');\n      var vipClose   = document.getElementById('vip-pop-close');\n      vipInfoBtn.addEventListener('click', function(e){ e.stopPropagation(); vipPopover.classList.toggle('open'); });\n      vipClose.addEventListener('click', function(){ vipPopover.classList.remove('open'); });\n      document.addEventListener('click', function(e){ if(!vipPopover.contains(e.target) && e.target !== vipInfoBtn){ vipPopover.classList.remove('open'); }});\n      document.addEventListener('keydown', function(e){ if(e.key==='Escape'){ vipPopover.classList.remove('open'); }});\n\n      // Add to cart\n      document.getElementById('back-2').addEventListener('click', function(){ setActiveStep(2); });\n      document.getElementById('add-to-cart').addEventListener('click', function(){\n        try{\n          if(!state.tier || !state.term || !state.drink1 || (state.tier==='two' && !state.drink2)){\n            alert('Please complete your selections first.');\n            return;\n          }\n          var tierKey = state.tier === 'two' ? 'twoDrinks' : 'oneDrink';\n          var termCfg = CONFIG[tierKey][state.term];\n          if(!termCfg || !termCfg.variantId || !termCfg.sellingPlanId){\n            alert('Term mapping missing variant/selling_plan IDs. Please update CONFIG.');\n            return;\n          }\n          var props = (state.tier === 'two')\n            ? { 'Drink One': state.drink1, 'Drink Two': state.drink2 }\n            : { 'Drink Selection': state.drink1 };\n\n          var items = [\n            { id: Number(termCfg.variantId), quantity: 1, selling_plan: Number(termCfg.sellingPlanId), properties: props }\n          ];\n          var vipToggle = document.getElementById('vip-toggle');\n          if(vipToggle && vipToggle.checked){\n            items.push({ id: Number(CONFIG.vip.variantId), quantity: 1, selling_plan: Number(CONFIG.vip.sellingPlanId) });\n          }\n\n          fetch('/cart/add.js',{\n            method:'POST', headers:{'Content-Type':'application/json'},\n            body: JSON.stringify({ items: items })\n          })\n          .then(function(){ openCartDrawer(); })\n          .catch(function(){ location.href = buildLinkFallback(); });\n        }catch(err){\n          console.error(err);\n          location.href = buildLinkFallback();\n        }\n      });\n\n      function buildLinkFallback(){\n        var tierKey = state.tier === 'two' ? 'twoDrinks' : 'oneDrink';\n        var termCfg = CONFIG[tierKey][state.term];\n        var vipToggle = document.getElementById('vip-toggle');\n        var url = new URL(location.origin + '/cart/add');\n        url.searchParams.append('items[0][id]', termCfg.variantId);\n        url.searchParams.append('items[0][quantity]', '1');\n        url.searchParams.append('items[0][selling_plan]', termCfg.sellingPlanId);\n        if(vipToggle && vipToggle.checked){\n          url.searchParams.append('items[1][id]', CONFIG.vip.variantId);\n          url.searchParams.append('items[1][quantity]', '1');\n          url.searchParams.append('items[1][selling_plan]', CONFIG.vip.sellingPlanId);\n        }\n        return url.toString();\n      }\n\n      // Init toggles & Step 1\n      attachToggleHandlers();\n      setActiveStep(1);\n    });\n  </script>\n</body>\n</html>",
        "color_scheme": "scheme-1",
        "padding_top": 40,
        "padding_bottom": 52
      }
    }
  },
  "order": [
    "main",
    "custom_liquid_yxKzpk"
  ]
}
