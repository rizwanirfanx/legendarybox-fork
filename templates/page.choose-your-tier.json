/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "main": {
      "type": "main-page",
      "disabled": true,
      "settings": {
        "padding_top": 28,
        "padding_bottom": 28
      }
    },
    "custom_liquid_yxKzpk": {
      "type": "custom-liquid",
      "name": "t:sections.custom-liquid.presets.name",
      "settings": {
        "custom_liquid": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title>Caffeine & Legends – Multi‑Step Selector</title>\n  <style>\n    :root{\n      --brand:#e33b3b; /* button red */\n      --ink:#0d2331;   /* dark teal text */\n      --muted:#607d8b; /* secondary text */\n      --bg:#0c2b34;    /* page bg */\n      --card:#ffffff;  /* card bg */\n      --accent:#7ee081;/* success/step accent */\n      --radius:18px;\n      --shadow:0 10px 24px rgba(0,0,0,.08);\n    }\n    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}\n    .wrap{max-width:1100px;margin:32px auto;padding:20px}\n    h1{color:var(--ink);text-align:center;margin:8px 0 18px;font-weight:800;letter-spacing:.2px}\n    .steps{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:8px auto 22px;max-width:820px}\n    .step{display:flex;align-items:center;gap:10px;background:#0e3a45;color:#b7d6db;padding:10px 12px;border-radius:999px;font-size:14px}\n    .step.active{background:#104854;color:#fff}\n    .step .dot{width:26px;height:26px;border-radius:50%;display:grid;place-items:center;background:#0b3039;color:#9fc8ce}\n    .step.active .dot{background:var(--accent);color:#083b1a;font-weight:700}\n\n    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}\n    .grid{display:grid;gap:16px}\n    @media (min-width:880px){\n      .grid.cols-2{grid-template-columns:1fr 1fr}\n      .grid.cols-4{grid-template-columns:repeat(4,1fr)}\n    }\n\n    .option{border:2px solid #e7eef1;border-radius:14px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:all .18s ease}\n    .option:hover{border-color:#c9dade;box-shadow:0 6px 18px rgba(3,34,41,.08)}\n    .option.selected{border-color:var(--brand);box-shadow:0 10px 24px rgba(227,59,59,.12)}\n    .option h3{margin:0 0 6px 0;font-size:20px}\n    .price{color:var(--muted);font-weight:600}\n\n    .controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center}\n    .select{appearance:none;border:2px solid #e7eef1;border-radius:12px;padding:12px 14px;font-size:16px;min-width:260px}\n\n    .terms{display:grid;gap:12px}\n    @media (min-width:880px){.terms{grid-template-columns:repeat(4,1fr)}}\n    .term{border:2px solid #e7eef1;border-radius:14px;padding:14px;display:flex;flex-direction:column;gap:6px;cursor:pointer}\n    .term small{color:var(--muted)}\n    .term.selected{border-color:var(--brand)}\n\n    .vip{display:flex;align-items:start;gap:12px;border-top:1px dashed #e7eef1;margin-top:14px;padding-top:14px}\n    .vip small{color:#5e6b74}\n\n    .cta{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:12px}\n    .btn{background:var(--brand);color:#fff;border:none;border-radius:999px;padding:14px 22px;font-weight:800;letter-spacing:.3px;cursor:pointer}\n    .btn.secondary{background:#ffffff;color:var(--brand);border:2px solid var(--brand)}\n    .hint{color:#dbe9ec;font-size:13px;text-align:center;margin-top:10px}\n    .hidden{display:none}\n      .option .sub-label{margin-top:6px;font-size:12px;color:var(--muted);display:block}\n    .option .select{width:100%;min-width:0;margin-top:6px}\n    .select.small{min-width:0;width:100%}\n    .price strong{font-weight:800}\n      .features{margin:8px 0 0;padding-left:18px;color:var(--muted);font-size:14px}\n    .features li{margin:4px 0}\n      /* Refined price layout */\n    .price{color:var(--muted);font-weight:600;display:flex;flex-direction:column;gap:2px}\n    .price .label{font-size:12px;color:var(--muted)}\n    .price .amount{font-size:24px;color:var(--ink);font-weight:800}\n    .price .suffix{font-size:14px;color:var(--muted);font-weight:600}\n      .features{margin:8px 0 0;padding-left:18px;color:var(--muted);font-size:14px}\n    .features li{margin:4px 0}\n      /* Condensed feature bullets with icons */\n    .features{margin:8px 0 0;padding:0;list-style:none;color:var(--ink);font-size:13px;line-height:1.25}\n    .features li{display:flex;align-items:flex-start;gap:8px;margin:3px 0}\n    .features .icon{width:18px;height:18px;border-radius:6px;display:grid;place-items:center;font-weight:800;font-size:12px}\n    .features .icon.check{background:#e6f7ec;border:2px solid #6ccf88;color:#1f7a3f}\n    .features .icon.x{background:#fdecef;border:2px solid #f08a96;color:#a2242e}\n    .features li.strike .text{text-decoration:line-through;color:#9aa7ad}\n      /* Subtle style for feature bullets */\n    .features{color:#5e6b74}\n    .features .icon{opacity:.9}\n    .features .icon.check{background:#f3fbf6;border:2px solid #d8efdf;color:#4a8a63}\n    .features .icon.x{background:#fdf3f5;border:2px solid #f4c7ce;color:#c05a65}\n    .features li .text strong{color:#2a3c46}\n    .features li.strike .text{color:#97a6ad;opacity:.9}\n    .features li img.scoop-thumb{width:22px;height:auto;border-radius:4px;margin:0 6px 0 0;object-fit:contain;flex:0 0 auto}\n      /* Promo ribbon and highlight */\n    .option{position:relative}\n    .option.promo{border-color:var(--accent);box-shadow:0 12px 28px rgba(126,224,129,.22)}\n    .option.promo .ribbon{position:absolute;top:-12px;right:-12px;z-index:2;background:var(--accent);color:#083b1a;display:flex;align-items:center;gap:6px;border-radius:999px;padding:6px 10px;border:2px solid #58c666;box-shadow:0 10px 20px rgba(8,59,26,.15)}\n    .option.promo .ribbon img{width:28px;height:28px;border-radius:6px;object-fit:cover}\n    .option.promo .ribbon .tag{font-weight:900;letter-spacing:.3px;font-size:12px;text-transform:uppercase}\n      /* Circle FREE GIFT badge + selection outline outside card */\n    .option{position:relative}\n    .option.selected{outline:3px solid var(--brand);outline-offset:3px;box-shadow:0 10px 24px rgba(227,59,59,.12)}\n    .option.promo{border-color:var(--accent);box-shadow:0 12px 28px rgba(126,224,129,.22)}\n    .option.promo.selected{border-color:var(--accent)!important}\n    .option.promo .badge-circle{position:absolute;top:-18px;right:-18px;z-index:2;width:96px;height:96px;border-radius:50%;background:#ffffff;border:3px solid var(--accent);box-shadow:0 10px 22px rgba(8,59,26,.18);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px;text-align:center}\n    .option.promo .badge-circle .top{font-weight:900;font-size:10px;color:#1f7a3f;letter-spacing:.4px;text-transform:uppercase;line-height:1;margin-bottom:4px}\n    .option.promo .badge-circle img{width:48px;height:auto;border-radius:6px;object-fit:contain}\n      /* Mobile tweak: slightly smaller FREE GIFT circle to avoid overlap */\n    @media (max-width: 640px){\n      .option.promo .badge-circle{width:72px;height:72px;top:-12px;right:-12px}\n      .option.promo .badge-circle img{width:36px}\n      .option.promo .badge-circle .top{font-size:9px}\n    }\n    @media (max-width: 380px){\n      .option.promo .badge-circle{width:64px;height:64px;top:-10px;right:-10px}\n      .option.promo .badge-circle img{width:30px}\n      .option.promo .badge-circle .top{font-size:8px}\n    }\n      /* Perk note on term cards */\n    .perk{color:#2b7a46;font-size:11px;font-weight:600;margin-top:2px;display:block;opacity:.9}\n    /* VIP tooltip styles */\n    .vip{position:relative}\n    .vip .vip-info{background:transparent;border:none;color:#104854;text-decoration:underline;cursor:pointer;font-size:12px;padding:0;margin-left:6px}\n    .vip-popover{position:absolute;right:0;bottom:calc(100% + 10px);top:auto;z-index:30;background:#ffffff;border:1px solid #e7eef1;border-radius:12px;box-shadow:0 12px 28px rgba(0,0,0,.12);padding:14px;max-width:520px;width:min(92vw,520px);max-height:min(70vh,420px);overflow:auto;display:none}\n    .vip-popover.open{display:block}\n    .vip-popover h4{margin:0 0 6px 0;font-size:16px}\n    .vip-popover p{margin:0 0 8px 0;color:#45626e}\n    .vip-popover ul{margin:8px 0 0 18px;padding:0;font-size:14px;color:#2a3c46}\n    .vip-popover li{margin:6px 0}\n    .vip-close{margin-top:10px;border:2px solid #e7eef1;background:#fff;border-radius:999px;padding:6px 10px;cursor:pointer;font-weight:700}\n  </style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <h1>Choose Your Subscription</h1>\n\n    <div class=\"steps\">\n      <div class=\"step active\" id=\"step-dot-1\"><span class=\"dot\">1</span>Tier</div>\n      <div class=\"step\" id=\"step-dot-2\"><span class=\"dot\">2</span>Drink</div>\n      <div class=\"step\" id=\"step-dot-3\"><span class=\"dot\">3</span>Term + VIP</div>\n    </div>\n\n    <!-- STEP 1: Tier selector -->\n    <section class=\"card\" id=\"step-1\">\n      <div class=\"grid cols-2\">\n        <div class=\"option\" data-tier=\"one\">\n          <h3>Standard</h3>\n          <div class=\"price\">\n            <span class=\"label\">Starting at</span>\n            <span class=\"amount\">$38.99<span class=\"suffix\"> /box + s/h</span></span>\n          </div>\n          <small>1 drink per month. Great for solo readers.</small>\n          <ul class=\"features\">\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Book</strong> — a mix of indie & well‑known authors</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>One drink of your choice</strong> — coffee, tea, or drinking chocolate</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Bookish Bonus</strong> — an extra themed item</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Booklet</strong> — a write‑up about the items + a themed recipe</span></li>\n            <li class=\"strike\"><span class=\"icon x\">✕</span><span class=\"text\"><strong>FREE Drink Scoop/Clip</strong> in first box</span></li>\n          </ul>\n        </div>\n        <div class=\"option promo\" data-tier=\"two\"><div class=\"badge-circle\"><span class=\"top\">FREE GIFT</span><img src=\"https://cdn.shopify.com/s/files/1/0305/4770/5900/files/Untitled_design_54.png?v=1738623166\" alt=\"Coffee Scoop\" loading=\"lazy\"></div>\n          <h3>Two Drinks Each Month</h3>\n          <div class=\"price\">\n            <span class=\"label\">Starting at</span>\n            <span class=\"amount\">$50.99<span class=\"suffix\"> /box + s/h</span></span>\n          </div>\n          <small>2 drinks per month. Best value for duos or caffeine fiends.</small>\n          <ul class=\"features\">\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Book</strong> — a mix of indie & well‑known authors</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>Two drinks of your choice</strong> — coffee, tea, or drinking chocolate</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Bookish Bonus</strong> — an extra themed item</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Booklet</strong> — a write‑up about the items + a themed recipe</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>FREE Drink Scoop/Clip</strong> in first box</span></li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"cta\">\n        <button class=\"btn\" id=\"to-step-2\" disabled>Continue →</button>\n        <span class=\"hint\">Select a tier to continue</span>\n      </div>\n    </section>\n\n    <!-- STEP 2: Drink dropdown -->\n    <section class=\"card hidden\" id=\"step-2\">\n      <div id=\"drink-form\" class=\"grid cols-2\"></div>\n      <div class=\"cta\">\n        <button class=\"btn secondary\" id=\"back-1\">← Back</button>\n        <button class=\"btn\" id=\"to-step-3\" disabled>Continue →</button>\n      </div>\n    </section>\n\n    <!-- STEP 3: Term + VIP -->\n    <section class=\"card hidden\" id=\"step-3\">\n      <div class=\"terms\" id=\"terms\"></div>\n\n      <label class=\"vip\">\n        <input type=\"checkbox\" id=\"vip-toggle\" />\n        <div class=\"vip-content\">\n          <strong>Unlock Legendary Access — join the C&L VIP program</strong>\n          <small>\n            Billed annually.\n            <button type=\"button\" class=\"vip-info\" id=\"vip-info-btn\">What’s included in Legendary Access?</button>\n          </small>\n          <div class=\"vip-popover\" id=\"vip-popover\" role=\"dialog\" aria-modal=\"false\" aria-labelledby=\"vip-pop-title\">\n            <h4 id=\"vip-pop-title\">🔮 LEGENDARY ACCESS 🔮</h4>\n            <p>Join an exclusive community where your voice shapes the magic.</p>\n            <ul>\n              <li>🗳️ <strong>Your Voice Matters</strong> — Vote on upcoming books, drinks, and bonus items in our members‑only Facebook group. Get behind‑the‑scenes content and connect with fellow fantasy lovers.</li>\n              <li>💎 <strong>Monthly Treasures</strong> — Receive $10 in exclusive credits every month for our secret store with member‑only deals. <em>(Credits expire after 30 days.)</em></li>\n              <li>✨ <strong>VIP Experiences</strong> — Monthly live Q&A sessions with authors, publishers, influencers, and small business owners.</li>\n              <li>🏆 <strong>Legendary Pin (Annual Members)</strong> — Limited‑edition C&L pin with AR tech that brings each month’s theme announcement to life. Included free with 12‑month subscriptions.</li>\n              <li>📜 <strong>Insider Access</strong> — Members‑only newsletter with exclusive content you won’t find anywhere else.</li>\n              <li>🎁 <strong>Golden Ticket Giveaways</strong> — Each month, one lucky member is drawn for a special surprise in their next box.</li>\n              <li>💰 <strong>Referral Rewards</strong> — Give $15, Get $15 when you share the magic of Caffeine & Legends with friends.</li>\n            </ul>\n            <button type=\"button\" class=\"vip-close\" id=\"vip-pop-close\">Close</button>\n          </div>\n        </div>\n      </label>\n\n      <div class=\"cta\">\n        <button class=\"btn secondary\" id=\"back-2\">← Back</button>\n        <button class=\"btn\" id=\"add-to-cart\">Add to Cart</button>\n        <span class=\"hint\" id=\"cta-hint\">Adds your plan (and VIP if selected) to the cart.</span>\n      </div>\n    </section>\n\n    <p class=\"hint\">Note: If your cart drawer doesn’t auto-open, replace the event in <code>openCartDrawer()</code> with your theme’s trigger or link to <code>/cart</code>.</p>\n  </div>\n\n  <script>\n    /** CONFIG: Replace with actual variant + selling plan IDs */\n    const CONFIG = {\n      oneDrink: {\n        monthly:   { variantId: 32035742220332, sellingPlanId: 3626041567 }, // provided\n        three:     { variantId: 0,             sellingPlanId: 0 },          // TODO\n        six:       { variantId: 37261724254369, sellingPlanId: 3625943263 }, // provided (test)\n        twelve:    { variantId: 0,             sellingPlanId: 0 },          // TODO\n      },\n      twoDrinks: {\n        monthly:   { variantId: 0, sellingPlanId: 0 }, // TODO\n        three:     { variantId: 0, sellingPlanId: 0 }, // TODO\n        six:       { variantId: 0, sellingPlanId: 0 }, // TODO\n        twelve:    { variantId: 0, sellingPlanId: 0 }, // TODO\n      },\n      vip: { variantId: 46994096718047, sellingPlanId: 4291854559 }\n    };\n\n    function openCartDrawer(){ document.dispatchEvent(new CustomEvent('cart:open')); }\n\n    // === STATE ===\n    let state = {\n      tier: null,          // 'one' | 'two'\n      drink1: null,        // 'Coffee' | 'Tea' | 'Drinking Chocolate' | 'Surprise Me'\n      drink2: null,\n      term: 'monthly'\n    };\n\n    // === STEP HANDLING ===\n    const stepDots = [1,2,3].map(i=>document.getElementById(`step-dot-${i}`));\n    function setActiveStep(n){\n      [1,2,3].forEach(i=>{\n        document.getElementById(`step-${i}`).classList.toggle('hidden', i!==n);\n        stepDots[i-1].classList.toggle('active', i===n);\n      });\n    }\n\n    // STEP 1: Tier selection\n    const tierOptions = document.querySelectorAll('#step-1 .option');\n    const btnToStep2 = document.getElementById('to-step-2');\n    tierOptions.forEach(opt=>{\n      opt.addEventListener('click', ()=>{\n        tierOptions.forEach(o=>o.classList.remove('selected'));\n        opt.classList.add('selected');\n        state.tier = opt.dataset.tier; // 'one' or 'two'\n        // reset drink selections when tier changes\n        state.drink1 = null; state.drink2 = null;\n        btnToStep2.disabled = false;\n      });\n    });\n    btnToStep2.addEventListener('click', ()=>{ renderDrinkStep(); setActiveStep(2); });\n\n    // STEP 2: Render drink inputs based on tier\n    const DRINK_OPTIONS = ['Coffee','Tea','Drinking Chocolate','Surprise Me'];\n\n    function createDrinkSelect(id,label){\n      const wrap = document.createElement('div');\n      wrap.className = 'controls';\n      const lab = document.createElement('label'); lab.htmlFor = id; lab.innerHTML = `<strong>${label}</strong>`;\n      const sel = document.createElement('select'); sel.id = id; sel.className = 'select';\n      const ph = document.createElement('option'); ph.value = ''; ph.textContent = 'Select a drink…'; ph.disabled = true; ph.selected = true; sel.appendChild(ph);\n      DRINK_OPTIONS.forEach(v=>{ const o=document.createElement('option'); o.value=v; o.textContent=v; sel.appendChild(o); });\n      wrap.appendChild(lab); wrap.appendChild(sel);\n      return {wrap, sel};\n    }\n\n    function renderDrinkStep(){\n      const form = document.getElementById('drink-form');\n      form.innerHTML = '';\n      const fields = [];\n      if(state.tier === 'two'){\n        const a = createDrinkSelect('drink-one','Drink One');\n        const b = createDrinkSelect('drink-two','Drink Two');\n        form.appendChild(a.wrap); form.appendChild(b.wrap);\n        fields.push(a.sel,b.sel);\n      } else {\n        const s = createDrinkSelect('drink-single','Drink');\n        form.appendChild(s.wrap); fields.push(s.sel);\n      }\n      const btn = document.getElementById('to-step-3');\n      const validate = ()=>{\n        const ok = fields.every(s=>s.value && s.value.length>0);\n        btn.disabled = !ok;\n      };\n      fields.forEach(s=> s.addEventListener('change', validate));\n      validate();\n    }\n\n    document.getElementById('back-1').addEventListener('click', ()=> setActiveStep(1));\n    document.getElementById('to-step-3').addEventListener('click', ()=>{\n      if(state.tier === 'two'){\n        state.drink1 = document.getElementById('drink-one').value;\n        state.drink2 = document.getElementById('drink-two').value;\n      } else {\n        state.drink1 = document.getElementById('drink-single').value;\n      }\n      renderTerms();\n      setActiveStep(3);\n    });\n\n    // STEP 3: Terms grid\n    function renderTerms(){\n      const container = document.getElementById('terms');\n      container.innerHTML = '';\n      const copy = [\n        {key:'monthly', title:'Monthly Plan', price:'$42.99/mo', note:'+ Shipping'},\n        {key:'three',   title:'3‑Month Prepaid', price:'$41.99/box', note:'Billed every 3 months', perk:'Includes FREE Drink Scoop/Clip in first box'},\n        {key:'six',     title:'6‑Month Prepaid', price:'$39.99/box', note:'Billed every 6 months', perk:'Includes FREE Drink Scoop/Clip in first box'},\n        {key:'twelve',  title:'12‑Month Prepaid', price:'$38.99/box', note:'Billed annually', perk:'Includes FREE Drink Scoop/Clip in first box'}\n      ];\n      copy.forEach(({key,title,price,note,perk})=>{\n        const el = document.createElement('div');\n        el.className = 'term';\n        el.dataset.term = key;\n        el.innerHTML = `<strong>${title}</strong><div>${price}</div><small>${note}</small>${perk ? `<br><small class=\\\"perk\\\">${perk}</small>` : ''}`;\n        if(key===state.term) el.classList.add('selected');\n        el.addEventListener('click', ()=>{\n          document.querySelectorAll('.term').forEach(t=>t.classList.remove('selected'));\n          el.classList.add('selected');\n          state.term = key;\n        });\n        container.appendChild(el);\n      });\n    }\n\n    document.getElementById('back-2').addEventListener('click', ()=> setActiveStep(2));\n\n    // VIP popover toggle\n    const vipInfoBtn = document.getElementById('vip-info-btn');\n    const vipPopover = document.getElementById('vip-popover');\n    const vipClose = document.getElementById('vip-pop-close');\n    if(vipInfoBtn && vipPopover){\n      vipInfoBtn.addEventListener('click', (e)=>{\n        e.stopPropagation();\n        vipPopover.classList.toggle('open');\n      });\n      if(vipClose){ vipClose.addEventListener('click', ()=> vipPopover.classList.remove('open')); }\n      document.addEventListener('click', (e)=>{\n        if(!vipPopover.contains(e.target) && e.target !== vipInfoBtn){\n          vipPopover.classList.remove('open');\n        }\n      });\n      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') vipPopover.classList.remove('open'); });\n    }\n\n    document.getElementById('add-to-cart').addEventListener('click', async ()=>{\n      try{\n        if(!state.tier || !state.term || !state.drink1 || (state.tier==='two' && !state.drink2)){\n          alert('Please complete your selections first.');\n          return;\n        }\n        const tierKey = state.tier === 'two' ? 'twoDrinks' : 'oneDrink';\n        const termCfg = CONFIG[tierKey][state.term];\n        if(!termCfg || !termCfg.variantId || !termCfg.sellingPlanId){\n          alert('Term mapping missing variant/selling_plan IDs. Please update CONFIG.');\n          return;\n        }\n        const props = (state.tier === 'two')\n          ? { 'Drink One': state.drink1, 'Drink Two': state.drink2 }\n          : { 'Drink Selection': state.drink1 };\n        const items = [\n          { id: Number(termCfg.variantId), quantity: 1, selling_plan: Number(termCfg.sellingPlanId), properties: props }\n        ];\n        if(document.getElementById('vip-toggle').checked){\n          items.push({ id: Number(CONFIG.vip.variantId), quantity: 1, selling_plan: Number(CONFIG.vip.sellingPlanId) });\n        }\n        await fetch('/cart/add.js',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ items }) });\n        openCartDrawer();\n      }catch(err){\n        console.error(err);\n        location.href = buildLinkFallback();\n      }\n    });\n\n    function buildLinkFallback(){\n      const tierKey = state.tier === 'two' ? 'twoDrinks' : 'oneDrink';\n      const termCfg = CONFIG[tierKey][state.term];\n      let url = new URL(location.origin + '/cart/add');\n      url.searchParams.append('items[0][id]', termCfg.variantId);\n      url.searchParams.append('items[0][quantity]', '1');\n      url.searchParams.append('items[0][selling_plan]', termCfg.sellingPlanId);\n      if(document.getElementById('vip-toggle').checked){\n        url.searchParams.append('items[1][id]', CONFIG.vip.variantId);\n        url.searchParams.append('items[1][quantity]', '1');\n        url.searchParams.append('items[1][selling_plan]', CONFIG.vip.sellingPlanId);\n      }\n      return url.toString();\n    }\n\n    // Initialize first screen\n    setActiveStep(1);\n  </script>\n</body>\n</html>",
        "color_scheme": "scheme-1",
        "padding_top": 40,
        "padding_bottom": 52
      }
    },
    "custom_liquid_rtwNLc": {
      "type": "custom-liquid",
      "name": "t:sections.custom-liquid.presets.name",
      "settings": {
        "custom_liquid": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Caffeine & Legends – Multi-Step Selector (No VIP)</title>\n<style>\n  :root{\n    --brand:#e33b3b; --ink:#0d2331; --muted:#607d8b; --bg:#0c2b34; --card:#ffffff;\n    --accent:#7ee081; --radius:18px; --shadow:0 10px 24px rgba(0,0,0,.08);\n  }\n  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,\"Helvetica Neue\",Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}\n  .wrap{max-width:1100px;margin:32px auto;padding:20px}\n  h1{color:var(--ink);text-align:center;margin:8px 0 18px;font-weight:800;letter-spacing:.2px}\n\n  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}\n  .grid{display:grid;gap:16px}\n  @media (min-width:880px){\n    .grid.cols-2{grid-template-columns:1fr 1fr}\n    .grid.cols-4{grid-template-columns:repeat(4,1fr)}\n  }\n\n  .option{border:2px solid #e7eef1;border-radius:14px;padding:16px;display:flex;flex-direction:column;gap:10px;transition:all .18s ease;position:relative;cursor:pointer}\n  .option:hover{border-color:#c9dade;box-shadow:0 6px 18px rgba(3,34,41,.08)}\n  .option.selected{border-color:var(--brand);box-shadow:0 10px 24px rgba(227,59,59,.12)}\n  .option h3{margin:0 0 6px 0;font-size:20px}\n  .price{color:var(--muted);font-weight:600;display:flex;flex-direction:column;gap:2px}\n  .price .label{font-size:12px;color:var(--muted)}\n  .price .amount{font-size:24px;color:var(--ink);font-weight:800}\n  .price .suffix{font-size:14px;color:var(--muted);font-weight:600}\n\n  .features{margin:8px 0 0;padding:0;list-style:none;color:#5e6b74;font-size:13px;line-height:1.25}\n  .features li{display:flex;align-items:flex-start;gap:8px;margin:3px 0}\n  .features .icon{width:18px;height:18px;border-radius:6px;display:grid;place-items:center;font-weight:800;font-size:12px;opacity:.9}\n  .features .icon.check{background:#f3fbf6;border:2px solid #d8efdf;color:#4a8a63}\n  .features .icon.x{background:#fdf3f5;border:2px solid #f4c7ce;color:#c05a65}\n  .features li.strike .text{color:#97a6ad;opacity:.9;text-decoration:line-through}\n  .features li .text strong{color:#2a3c46}\n\n  .option.promo{border-color:var(--accent);box-shadow:0 12px 28px rgba(126,224,129,.22)}\n  .option.promo .badge-circle{position:absolute;top:-18px;right:-18px;z-index:2;width:96px;height:96px;border-radius:50%;background:#ffffff;border:3px solid var(--accent);box-shadow:0 10px 22px rgba(8,59,26,.18);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px;text-align:center}\n  .option.promo .badge-circle .top{font-weight:900;font-size:10px;color:#1f7a3f;letter-spacing:.4px;text-transform:uppercase;line-height:1;margin-bottom:4px}\n  .option.promo .badge-circle img{width:48px;height:auto;border-radius:6px;object-fit:contain}\n  @media (max-width: 640px){\n    .option.promo .badge-circle{width:72px;height:72px;top:-12px;right:-12px}\n    .option.promo .badge-circle img{width:36px}\n    .option.promo .badge-circle .top{font-size:9px}\n  }\n  @media (max-width: 380px){\n    .option.promo .badge-circle{width:64px;height:64px;top:-10px;right:-10px}\n    .option.promo .badge-circle img{width:30px}\n    .option.promo .badge-circle .top{font-size:8px}\n  }\n\n  .btn{background:var(--brand);color:#fff;border:none;border-radius:999px;padding:12px 18px;font-weight:800;letter-spacing:.3px;cursor:pointer}\n  .btn.secondary{background:#ffffff;color:var(--brand);border:2px solid var(--brand)}\n  .cta{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:12px}\n\n  .controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center}\n  .select{appearance:none;border:2px solid #e7eef1;border-radius:12px;padding:12px 14px;font-size:16px;min-width:260px}\n  .select.small{min-width:0;width:100%}\n\n  .terms{display:grid;gap:12px}\n  @media (min-width:880px){.terms{grid-template-columns:repeat(4,1fr)}}\n  .term{border:2px solid #e7eef1;border-radius:14px;padding:14px;display:flex;flex-direction:column;gap:6px;cursor:pointer}\n  .term small{color:var(--muted)}\n  .term.selected{border-color:var(--brand)}\n\n  .hidden{display:none}\n</style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <h1>Choose Your Subscription</h1>\n\n    <!-- STEP 1 -->\n    <section class=\"card\" id=\"step-1\">\n      <div class=\"grid cols-2\">\n        <div class=\"option\" data-tier=\"one\">\n          <h3>Standard</h3>\n          <div class=\"price\">\n            <span class=\"label\">Starting at</span>\n            <span class=\"amount\">$38.99<span class=\"suffix\"> /box + s/h</span></span>\n          </div>\n          <small>1 drink per month. Great for solo readers.</small>\n          <ul class=\"features\">\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Book</strong> — a mix of indie & well-known authors</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>One drink of your choice</strong> — coffee, tea, or drinking chocolate</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Bookish Bonus</strong> — an extra themed item</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Booklet</strong> — a write-up about the items + a themed recipe</span></li>\n            <li class=\"strike\"><span class=\"icon x\">✕</span><span class=\"text\"><strong>FREE Drink Scoop/Clip</strong> in first box</span></li>\n          </ul>\n          <div class=\"cta\">\n            <button class=\"btn choose-tier\" data-tier=\"one\" type=\"button\">Select Standard</button>\n          </div>\n        </div>\n\n        <div class=\"option promo\" data-tier=\"two\">\n          <div class=\"badge-circle\">\n            <span class=\"top\">FREE GIFT</span>\n            <img src=\"https://cdn.shopify.com/s/files/1/0305/4770/5900/files/Untitled_design_54.png?v=1738623166\" alt=\"Coffee Scoop\" loading=\"lazy\">\n          </div>\n          <h3>Two Drinks Each Month</h3>\n          <div class=\"price\">\n            <span class=\"label\">Starting at</span>\n            <span class=\"amount\">$50.99<span class=\"suffix\"> /box + s/h</span></span>\n          </div>\n          <small>2 drinks per month. Best value for duos or caffeine fiends.</small>\n          <ul class=\"features\">\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Book</strong> — a mix of indie & well-known authors</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>Two drinks of your choice</strong> — coffee, tea, or drinking chocolate</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Bookish Bonus</strong> — an extra themed item</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>A Booklet</strong> — a write-up about the items + a themed recipe</span></li>\n            <li><span class=\"icon check\">✓</span><span class=\"text\"><strong>FREE Drink Scoop/Clip</strong> in first box</span></li>\n          </ul>\n          <div class=\"cta\">\n            <button class=\"btn choose-tier\" data-tier=\"two\" type=\"button\">Select Double Drinks</button>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <!-- STEP 2 -->\n    <section class=\"card hidden\" id=\"step-2\">\n      <div id=\"drink-form\" class=\"grid cols-2\"></div>\n      <div class=\"cta\">\n        <button class=\"btn secondary\" id=\"back-1\" type=\"button\">← Back</button>\n        <button class=\"btn\" id=\"to-step-3\" type=\"button\" disabled>Continue →</button>\n      </div>\n    </section>\n\n    <!-- STEP 3 -->\n    <section class=\"card hidden\" id=\"step-3\">\n      <div class=\"terms\" id=\"terms\"></div>\n      <div class=\"cta\">\n        <button class=\"btn secondary\" id=\"back-2\" type=\"button\">← Back</button>\n        <button class=\"btn\" id=\"add-to-cart\" type=\"button\">Add to Cart</button>\n      </div>\n    </section>\n  </div>\n\n  <script>\n    /* ====== CONFIG (no VIP) ====== */\n    const CONFIG = {\n      oneDrink: {\n        monthly:   { variantId: 32035742220332, sellingPlanId: 3626041567 },\n        three:     { variantId: 0,              sellingPlanId: 0 },\n        six:       { variantId: 37261724254369, sellingPlanId: 3625943263 },\n        twelve:    { variantId: 0,              sellingPlanId: 0 },\n      },\n      twoDrinks: {\n        monthly:   { variantId: 0, sellingPlanId: 0 },\n        three:     { variantId: 0, sellingPlanId: 0 },\n        six:       { variantId: 0, sellingPlanId: 0 },\n        twelve:    { variantId: 0, sellingPlanId: 0 },\n      }\n    };\n    function openCartDrawer(){ document.dispatchEvent(new CustomEvent('cart:open')); }\n\n    /* ====== STATE ====== */\n    const state = { tier:null, drink1:null, drink2:null, term:'monthly' };\n    const DRINK_OPTIONS = ['Coffee','Tea','Drinking Chocolate','Surprise Me'];\n\n    function setActiveStep(n){\n      [1,2,3].forEach(i=>{\n        const sec = document.getElementById(`step-${i}`);\n        if (sec) sec.classList.toggle('hidden', i!==n);\n      });\n    }\n\n    function createDrinkSelect(id,label){\n      const wrap = document.createElement('div');\n      wrap.className = 'controls';\n      const lab = document.createElement('label'); lab.htmlFor = id; lab.innerHTML = `<strong>${label}</strong>`;\n      const sel = document.createElement('select'); sel.id = id; sel.className = 'select';\n      const ph = document.createElement('option'); ph.value=''; ph.textContent='Select a drink…'; ph.disabled=true; ph.selected=true; sel.appendChild(ph);\n      DRINK_OPTIONS.forEach(v=>{ const o=document.createElement('option'); o.value=v; o.textContent=v; sel.appendChild(o); });\n      wrap.appendChild(lab); wrap.appendChild(sel);\n      return {wrap, sel};\n    }\n\n    function renderDrinkStep(){\n      const form = document.getElementById('drink-form');\n      form.innerHTML = '';\n      const fields = [];\n      if(state.tier === 'two'){\n        const a = createDrinkSelect('drink-one','Drink One');\n        const b = createDrinkSelect('drink-two','Drink Two');\n        form.appendChild(a.wrap); form.appendChild(b.wrap);\n        fields.push(a.sel,b.sel);\n      } else {\n        const s = createDrinkSelect('drink-single','Drink');\n        form.appendChild(s.wrap); fields.push(s.sel);\n      }\n      const btn = document.getElementById('to-step-3');\n      const validate = ()=>{ btn.disabled = !fields.every(s=>s.value && s.value.length>0); };\n      fields.forEach(s=> s.addEventListener('change', validate));\n      validate();\n    }\n\n    function renderTerms(){\n      const container = document.getElementById('terms');\n      container.innerHTML = '';\n      const copy = [\n        {key:'monthly', title:'Monthly Plan',   price:'$42.99/mo',  note:'+ Shipping'},\n        {key:'three',   title:'3-Month Prepaid',price:'$41.99/box', note:'Billed every 3 months', perk:'Includes FREE Drink Scoop/Clip in first box'},\n        {key:'six',     title:'6-Month Prepaid',price:'$39.99/box', note:'Billed every 6 months', perk:'Includes FREE Drink Scoop/Clip in first box'},\n        {key:'twelve',  title:'12-Month Prepaid',price:'$38.99/box',note:'Billed annually',       perk:'Includes FREE Drink Scoop/Clip in first box'}\n      ];\n      copy.forEach(({key,title,price,note,perk})=>{\n        const el = document.createElement('div');\n        el.className = 'term';\n        el.dataset.term = key;\n        el.innerHTML = `<strong>${title}</strong><div>${price}</div><small>${note}</small>${perk ? `<br><small class=\"perk\">${perk}</small>` : ''}`;\n        if(key===state.term) el.classList.add('selected');\n        el.addEventListener('click', ()=>{\n          document.querySelectorAll('.term').forEach(t=>t.classList.remove('selected'));\n          el.classList.add('selected');\n          state.term = key;\n        });\n        container.appendChild(el);\n      });\n    }\n\n    /* ====== BIND (robust for Shopify sections) ====== */\n    function bindCLSelector(){\n      if (window.__clSelectorBound) return; // idempotent\n      window.__clSelectorBound = true;\n\n      // Entire card click advances (unless clicking a button triggers first)\n      document.addEventListener('click', (e)=>{\n        const btn = e.target.closest('.choose-tier');\n        const card = e.target.closest('.option');\n        if (btn) {\n          e.preventDefault();\n          const tier = btn.dataset.tier;\n          chooseTier(tier);\n          return;\n        }\n        if (card && card.dataset.tier && !e.target.closest('button')) {\n          chooseTier(card.dataset.tier);\n        }\n      });\n\n      // Back / Continue / Add-to-cart via delegation\n      document.addEventListener('click', (e)=>{\n        const back1 = e.target.closest('#back-1');\n        const to3   = e.target.closest('#to-step-3');\n        const back2 = e.target.closest('#back-2');\n        const add   = e.target.closest('#add-to-cart');\n        if (back1){ e.preventDefault(); setActiveStep(1); }\n        if (to3){\n          e.preventDefault();\n          if(state.tier === 'two'){\n            state.drink1 = document.getElementById('drink-one').value;\n            state.drink2 = document.getElementById('drink-two').value;\n          } else {\n            state.drink1 = document.getElementById('drink-single').value;\n          }\n          renderTerms();\n          setActiveStep(3);\n          document.getElementById('step-3').scrollIntoView({behavior:'smooth', block:'start'});\n        }\n        if (back2){ e.preventDefault(); setActiveStep(2); }\n        if (add){ e.preventDefault(); addToCart(); }\n      });\n    }\n\n    function chooseTier(tier){\n      state.tier = tier;\n      document.querySelectorAll('#step-1 .option').forEach(o=>o.classList.remove('selected'));\n      const opt = document.querySelector(`#step-1 .option[data-tier=\"${tier}\"]`);\n      if (opt) opt.classList.add('selected');\n      state.drink1 = null; state.drink2 = null;\n      renderDrinkStep();\n      setActiveStep(2);\n      document.getElementById('step-2').scrollIntoView({behavior:'smooth', block:'start'});\n    }\n\n    async function addToCart(){\n      try{\n        if(!state.tier || !state.term || !state.drink1 || (state.tier==='two' && !state.drink2)){\n          alert('Please complete your selections first.');\n          return;\n        }\n        const tierKey = state.tier === 'two' ? 'twoDrinks' : 'oneDrink';\n        const termCfg = CONFIG[tierKey][state.term];\n        if(!termCfg || !termCfg.variantId || !termCfg.sellingPlanId){\n          alert('Term mapping missing variant/selling_plan IDs. Please update CONFIG.');\n          return;\n        }\n        const props = (state.tier === 'two')\n          ? { 'Drink One': state.drink1, 'Drink Two': state.drink2 }\n          : { 'Drink Selection': state.drink1 };\n\n        const items = [\n          { id: Number(termCfg.variantId), quantity: 1, selling_plan: Number(termCfg.sellingPlanId), properties: props }\n        ];\n\n        await fetch('/cart/add.js',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ items }) });\n        openCartDrawer();\n      }catch(err){\n        console.error(err);\n        location.href = buildLinkFallback();\n      }\n    }\n\n    function buildLinkFallback(){\n      const tierKey = state.tier === 'two' ? 'twoDrinks' : 'oneDrink';\n      const termCfg = CONFIG[tierKey][state.term];\n      const url = new URL(location.origin + '/cart/add');\n      url.searchParams.append('items[0][id]', termCfg.variantId);\n      url.searchParams.append('items[0][quantity]', '1');\n      url.searchParams.append('items[0][selling_plan]', termCfg.sellingPlanId);\n      return url.toString();\n    }\n\n    // Bind immediately (covers theme editor + ajax section loads)\n    bindCLSelector();\n    document.addEventListener('shopify:section:load', bindCLSelector);\n\n    // Initial step\n    setActiveStep(1);\n  </script>\n</body>\n</html>",
        "color_scheme": "",
        "padding_top": 40,
        "padding_bottom": 52
      }
    }
  },
  "order": [
    "main",
    "custom_liquid_yxKzpk",
    "custom_liquid_rtwNLc"
  ]
}
