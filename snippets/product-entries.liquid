{%- liquid
  assign p = product
  assign accent = accent | default: '#103948'
  assign base_price = p.metafields.sharedsweeps.priceoverride
  if base_price == blank
    assign base_price = p.price | divided_by: 100.0
  endif
  assign global_mult  = shop.metafields.sharedsweeps.global_multiplier | default: 1
  assign product_mult = p.metafields.sharedsweeps.multiplier
  assign mult = global_mult
  if product_mult != blank and product_mult > global_mult
    assign mult = product_mult
  endif
  assign bonus = p.metafields.sharedsweeps.bonusEntries | default: 0
-%}

{%- if base_price > 0 -%}
<div class="ss-entries-wrap" style="--ss-accent: {{ accent }};">
  <div class="ss-entries-badge"
       data-base-price="{{ base_price }}"
       data-mult="{{ mult }}"
       data-bonus="{{ bonus }}">
    <span class="ss-entries-badge__text">
      Earn <span class="ss-entries-value" id="ss-entries-value">{{ base_price | times: mult | floor }}</span> Entries
      {%- if bonus > 0 -%}+ <span class="ss-entries-bonus">{{ bonus }}</span> Bonus{%- endif -%}
    </span>
    <span class="ss-entries-badge__mult">{{ mult }}X</span>
  </div>
</div>

{%- if bonus > 0 -%}
<span class="ss-entries-bonus-wrap">
  + <span class="ss-entries-bonus" id="ss-entries-bonus">{{ bonus }}</span> Bonus
</span>
{%- endif -%}

<style>
  @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap');

  .ss-entries-wrap { 
    margin: 0 auto 10px; 
    font-family: 'Cinzel', serif; 
    text-shadow: 1px 1px 0 #8b5e3c;
  }
  .ss-entries-badge {
    display: inline-flex; 
    align-items: center; 
    justify-content: space-between; 
    gap: 10px;
    padding: 4px 6px; 
    border-radius: 12px; 
    border: 2px solid var(--ss-accent, #103948);
    background: linear-gradient(145deg, #f3e4d0, #e6c9a8);
    font-weight: 700; 
    font-size: 11px; 
    color: #103948;
    box-shadow: 3px 3px 6px rgba(0,0,0,0.4), inset 0 0 5px rgba(255,255,255,0.2);
    text-transform: uppercase;
  }
  .ss-entries-value { 
    color: var(--ss-accent, #103948); 
    font-weight: 900; 
    font-size: 14px; 
    text-shadow: 1px 1px 2px #8b5e3c;
  }
  .ss-entries-bonus { 
    color: #8b5e3c; 
    font-weight: 700; 
    margin-left: 4px; 
  }
  .ss-entries-badge__mult { 
    background: #8b5e3c; 
    color: #f3e4d0; 
    font-size: 13px; 
    font-weight: 700; 
    padding: 4px 8px; 
    border-radius: 6px; 
    white-space: nowrap; 
    box-shadow: 1px 1px 2px rgba(0,0,0,0.3) inset;
  }
  .ss-entries-badge__text {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .ss-entries-bonus-wrap {
    display: inline-flex;
    align-items: center;
    background: #f5e1c4;
    color: #8b5e3c;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 6px;
    font-size: 12px;
    box-shadow: inset 0 0 3px rgba(0,0,0,0.2);
  }
</style>
{%- endif -%}
